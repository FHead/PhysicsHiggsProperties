UInt_t FindElectronEfficiencyBin( double value, double bins[], UInt_t nbins) {
  UInt_t nbinboundaries = nbins+1;
  UInt_t bin = 0;
  for (uint i=0; i < nbinboundaries; ++i) {
    if (i < nbinboundaries-1) {
      if (value >= bins[i] && value < bins[i+1]) {
        bin = i+1;
        break;
      }
    } else if (i == nbinboundaries-1) {
      if (value >= bins[i]) {
        bin = nbinboundaries;
        break;
      }
    }    
  }
  return bin;
}



Double_t GetElectronEfficiencyPtEta_8TeV(Double_t Pt, Double_t Eta) {

  Double_t ptBins[16] = {5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50};
  Double_t etaBins[17] = {0,0.2,0.4,0.6,0.8,1,1.2,1.4442,1.566,1.8,2,2.1,2.2,2.3,2.4,2.5,2.6};

// With manual corrections
  Double_t Efficiency[17][18] = {
    {0,0.00158101,0.00132623,0.00119972,0.00091122,0.000985663,0.00149915,0.0015029,0.00371927,0.00205715,0.00216234,0.00239263,0.00365479,0.00443628,0.00220936,0.00142887,0.000155367,0    },
    {0,0.00475059,0.00450328,0.0049155,0.00500398,0.00791082,0.0126704,0.0192512,0.0306592,0.0298447,0.0237374,0.022288,0.0184399,0.0138755,0.00692114,0.00739689,0,0    },
    {0,0.0445023,0.0582825,0.058058,0.0690805,0.0831541,0.122633,0.143274,0.0962607,0.152848,0.151269,0.157,0.116638,0.0919682,0.0619514,0.0424383,0,0    },
    {0,0.573404,0.643833,0.659091,0.674655,0.674137,0.661222,0.578565,0.25791,0.425808,0.504177,0.492457,0.401912,0.372462,0.338216,0.233417,0.0042471,0    },
    {0,0.628339,0.672712,0.70049,0.714514,0.704477,0.678521,0.625859,0.286983,0.470824,0.549127,0.547338,0.466971,0.442233,0.398447,0.295326,0.00188087,0    },
    {0,0.73222,0.772297,0.783219,0.789895,0.769128,0.771712,0.72685,0.34377,0.555011,0.655929,0.619184,0.543153,0.521735,0.507232,0.388389,0.00102609,0    },
    {0,0.822292,0.845123,0.845294,0.836465,0.831141,0.81871,0.780712,0.428624,0.643245,0.688109,0.695151,0.638901,0.62521,0.593569,0.471302,0.00345595,0    },
    {0,0.865697,0.881884,0.884962,0.880949,0.873402,0.860446,0.839708,0.509911,0.73397,0.778134,0.767297,0.710701,0.675851,0.652015,0.53541,0.00632469,0    },
    {0,0.889913,0.900071,0.906506,0.901277,0.898719,0.896542,0.863233,0.552749,0.79329,0.817981,0.801071,0.757234,0.732703,0.70352,0.57132,0.00629241,0    },
    {0,0.890552,0.907615,0.910023,0.908017,0.903159,0.897778,0.883885,0.582318,0.819716,0.846093,0.823581,0.778005,0.763033,0.728584,0.631518,0.00480952,0    },
    {0,0.90288,0.921849,0.922147,0.917381,0.915065,0.909914,0.890611,0.607702,0.850346,0.868209,0.855619,0.813586,0.788868,0.75776,0.63849,0.00444934,0    },
    {0,0.891279,0.904458,0.904341,0.901218,0.899063,0.895968,0.883049,0.628929,0.852879,0.86616,0.847747,0.824898,0.794041,0.778823,0.68132,0.00369318,0    },
    {0,0.904369,0.912271,0.913626,0.913438,0.909233,0.906237,0.895451,0.665985,0.8757,0.8825,0.863498,0.839342,0.825519,0.795516,0.716533,0.0053719,0    },
    {0,0.912055,0.91867,0.920764,0.917538,0.917541,0.91097,0.903109,0.691083,0.887118,0.889753,0.873319,0.849296,0.839995,0.806766,0.730314,0.00512003,0    },
    {0,0.913439,0.921429,0.926313,0.922171,0.918279,0.91692,0.906732,0.695098,0.893633,0.89448,0.877426,0.855973,0.84452,0.829009,0.734083,0.0032112,0    },
    {0,0.912383,0.921284,0.922495,0.918071,0.917338,0.912887,0.901118,0.691982,0.893754,0.896832,0.879866,0.860282,0.84626,0.818601,0.725396,0.00802339,0    },
    {0,0.909606,0.920363,0.922286,0.915963,0.916038,0.908605,0.901954,0.655006,0.891605,0.89602,0.876427,0.860349,0.837151,0.809652,0.698122,0.00399961,0}
  };

  //Without manual corrections
//   Double_t Efficiency[17][18] = {
//     {0,0.00114982,0.000964532,0.000872522,0.000662706,0.000716846,0.00109029,0.00109302,0.00270492,0.00149611,0.00157261,0.00174009,0.00265803,0.00322638,0.00160681,0.00103918,0.000112994,0    },
//     {0,0.00345498,0.00327511,0.00357491,0.00363926,0.00575333,0.00921484,0.0140009,0.0222976,0.0217052,0.0172635,0.0162095,0.0134108,0.0100913,0.00503356,0.00537956,0,0    },
//     {0,0.0323653,0.0423872,0.042224,0.0502404,0.0604757,0.0891874,0.104199,0.0700077,0.111162,0.110014,0.114182,0.0848279,0.066886,0.0450556,0.0308642,0,0    },
//     {0,0.417021,0.468242,0.479339,0.490658,0.490281,0.480889,0.420774,0.187571,0.309678,0.366674,0.358151,0.2923,0.270882,0.245976,0.169757,0.0030888,0    },
//     {0,0.580989,0.622017,0.647702,0.66067,0.651389,0.627389,0.578695,0.265356,0.435343,0.507746,0.506091,0.431781,0.408907,0.368421,0.273071,0.00173913,0    },
//     {0,0.677041,0.714098,0.724197,0.73037,0.711168,0.713557,0.672076,0.317864,0.513186,0.606499,0.572523,0.502222,0.482418,0.469008,0.359121,0.000948767,0    },
//     {0,0.806169,0.828552,0.82872,0.820064,0.814844,0.802657,0.765404,0.42022,0.630632,0.674616,0.681521,0.626374,0.612951,0.58193,0.462061,0.00338819,0    },
//     {0,0.848723,0.864592,0.86761,0.863675,0.856276,0.843575,0.823243,0.499912,0.719578,0.762877,0.752252,0.696765,0.662599,0.63923,0.524912,0.00620068,0    },
//     {0,0.872464,0.882422,0.888731,0.883605,0.881097,0.878963,0.846307,0.541911,0.777736,0.801942,0.785363,0.742386,0.718336,0.689725,0.560117,0.00616903,0    },
//     {0,0.881735,0.898629,0.901013,0.899026,0.894217,0.888889,0.875134,0.576552,0.8116,0.837715,0.815426,0.770302,0.755478,0.72137,0.625265,0.0047619,0    },
//     {0,0.893941,0.912722,0.913017,0.908298,0.906005,0.900905,0.881793,0.601685,0.841927,0.859613,0.847147,0.805531,0.781058,0.750257,0.632168,0.00440529,0    },
//     {0,0.914132,0.92765,0.927529,0.924326,0.922116,0.918942,0.905691,0.645055,0.874748,0.888369,0.869485,0.846049,0.814401,0.798793,0.698789,0.00378788,0    },
//     {0,0.927558,0.935662,0.937052,0.93686,0.932547,0.929474,0.918412,0.683062,0.898154,0.905128,0.885639,0.860864,0.846686,0.815914,0.734906,0.00550964,0    },
//     {0,0.935441,0.942226,0.944373,0.941065,0.941068,0.934328,0.926266,0.708803,0.909865,0.912567,0.895712,0.871072,0.861533,0.827452,0.74904,0.00525131,0    },
//     {0,0.936861,0.945056,0.950065,0.945816,0.941825,0.940431,0.929982,0.712921,0.916547,0.917416,0.899925,0.877921,0.866175,0.850266,0.752905,0.00329354,0    },
//     {0,0.940601,0.949778,0.951025,0.946465,0.945709,0.941121,0.928988,0.713384,0.921395,0.924569,0.907078,0.886888,0.872433,0.843919,0.747831,0.00827153,0    },
//     {0,0.937738,0.948828,0.950811,0.944292,0.944369,0.936706,0.929849,0.675264,0.91918,0.923732,0.903533,0.886958,0.863042,0.834693,0.719714,0.00412331,0}
//   };


  Int_t tmpPtBin = FindElectronEfficiencyBin( Pt , ptBins, 15);
  Int_t tmpEtaBin = FindElectronEfficiencyBin( Eta , etaBins, 16);
  return Efficiency[tmpPtBin][tmpEtaBin];
}

Double_t GetElectronEfficiencyPtEta_7TeV(Double_t Pt, Double_t Eta) {

  Double_t ptBins[16] = {5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,50};
  Double_t etaBins[17] = {0,0.2,0.4,0.6,0.8,1,1.2,1.4442,1.566,1.8,2,2.1,2.2,2.3,2.4,2.5,2.6};


  Double_t Efficiency[17][18] = {
    {0,0.0458785,0.0400653,0.0222566,0.0162112,0.0133742,0.0149725,0.00621362,0.0103753,0.0224498,0.0150196,0.00953587,0.00728002,0.00751862,0.00438431,0.00227106,9.14438e-05,0    },
    {0,0.00928811,0.00960799,0.00567887,0.0054018,0.00801651,0.0166738,0.0157683,0.0250277,0.0399914,0.0339542,0.032058,0.0274419,0.0269436,0.0148069,0.00875377,0.000136986,0    },
    {0,0.0481411,0.0575166,0.0578342,0.0660984,0.0807915,0.101739,0.119846,0.0872737,0.14187,0.150553,0.1529,0.122825,0.0993131,0.0792919,0.0621332,0.000474966,0    },
    {0,0.581819,0.640994,0.658894,0.674578,0.642998,0.587402,0.526567,0.241826,0.39853,0.454823,0.452221,0.423944,0.403074,0.337539,0.263924,0.00071494,0    },
    {0,0.697691,0.764,0.770005,0.778059,0.761382,0.712876,0.654195,0.310144,0.513534,0.57984,0.588562,0.53726,0.517928,0.472033,0.36132,0.00111719,0    },
    {0,0.7948,0.842241,0.844629,0.852049,0.833733,0.814115,0.750827,0.372625,0.590907,0.67019,0.680574,0.624642,0.594088,0.537385,0.446723,0.00123838,0    },
    {0,0.892929,0.912002,0.907884,0.904578,0.889023,0.85761,0.796938,0.424583,0.665525,0.726123,0.707045,0.675948,0.644711,0.606249,0.490339,0.00166793,0    },
    {0,0.920786,0.941417,0.940989,0.936704,0.924313,0.90003,0.853934,0.500686,0.740772,0.795131,0.776115,0.730589,0.702096,0.669301,0.532465,0.00305683,0    },
    {0,0.932439,0.951553,0.951203,0.943438,0.937499,0.92414,0.882367,0.522114,0.793291,0.830358,0.81132,0.779422,0.750472,0.70425,0.575598,0.000804769,0    },
    {0,0.957417,0.975862,0.979532,0.975714,0.965969,0.953279,0.920732,0.571972,0.839095,0.86517,0.861234,0.830809,0.779195,0.750136,0.599345,0.00349162,0    },
    {0,0.963149,0.978735,0.980246,0.978015,0.968597,0.961836,0.928609,0.590788,0.858134,0.884294,0.875599,0.841171,0.801576,0.772709,0.628797,0.00235363,0    },
    {0,0.945704,0.966251,0.962478,0.954081,0.950377,0.942962,0.91584,0.596586,0.862879,0.878374,0.859778,0.83308,0.806075,0.773867,0.62294,0.00273545,0    },
    {0,0.954052,0.969323,0.970275,0.964374,0.957272,0.94979,0.929115,0.625645,0.881468,0.88716,0.876266,0.85072,0.819118,0.787524,0.638854,0.00273424,0    },
    {0,0.957441,0.973434,0.97435,0.969766,0.962299,0.958217,0.933808,0.63662,0.889519,0.894666,0.884257,0.852071,0.83377,0.791216,0.653702,0.00264064,0    },
    {0,0.960387,0.975816,0.98116,0.970108,0.964172,0.961998,0.939778,0.638283,0.897352,0.904061,0.884496,0.86077,0.83525,0.803731,0.656232,0.00260757,0    },
    {0,0.934169,0.949593,0.949368,0.94325,0.938156,0.933552,0.916485,0.624131,0.877822,0.881116,0.872429,0.848006,0.8154,0.789478,0.642354,0.00209968,0    },
    {0,0.940775,0.957471,0.957128,0.951535,0.945745,0.943847,0.930398,0.636073,0.902546,0.903523,0.892099,0.876698,0.851907,0.827333,0.67938,0.00188772,0}
  };


  Int_t tmpPtBin = FindElectronEfficiencyBin( Pt , ptBins, 15);
  Int_t tmpEtaBin = FindElectronEfficiencyBin( Eta , etaBins, 16);
  return Efficiency[tmpPtBin][tmpEtaBin];
}
